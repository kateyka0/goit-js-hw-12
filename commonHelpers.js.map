{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getImages(request, currentPage) {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: '44332544-4246296cfd54d81c9e369dca1',\n            q: request,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: currentPage,\n            per_page: 30,\n        }\n    });\n    return response.data;\n}\n","export function photoTemplate(image) {\n    return `<li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-item-image\"></a>\n        <ul class=\"image-info-list\">\n          <li class=\"list-item\">\n            <h3>Likes</h3>\n            <p class=\"likes-js\">${image.likes}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Views</h3>\n            <p class=\"views-js\">${image.views}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Comments</h3>\n            <p class=\"comments-js\">${image.comments}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Downloads</h3>\n            <p class=\"downloads-js\">${image.downloads}</p>\n          </li>\n        </ul>\n    </li>`;\n  }\n    export function galleryTemplate(array) {\n    return array.map(photo => photoTemplate(photo)).join('');\n}\n\nexport function showElem(elem) {\n    elem.classList.remove('visually-hidden');\n}\n\nexport function hideElem(elem) {\n    elem.classList.add('visually-hidden');\n   \n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { galleryTemplate, showElem, hideElem } from \"./js/render-functions\";\n\n\nconst lightBox = new SimpleLightbox('.gallery a',{\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nconst refs = {\n    formElem: document.querySelector('.form'),\n    galleryElem: document.querySelector('.gallery'),\n    galleryItem: document.querySelector('li'),\n    loader: document.querySelector('.loader'),\n    loadBtn: document.querySelector('.load-btn'),\n}\n\nlet page;\nlet userValue;\nlet maxPage;\n\nrefs.formElem.addEventListener('submit', onFormElemSubmit);\n\nasync function onFormElemSubmit(event) {\n    event.preventDefault();\n\n    hideElem(refs.loadBtn);\n    refs.galleryElem.innerHTML = '';\n    \n    userValue = refs.formElem.elements.search.value.trim();\n    if (!userValue) return;\n\n    page = 1;\n    showElem(refs.loader);\n\n    try {\n        const data = await getImages(userValue, page);\n        if (!data.hits.length){\n            showMessage('Sorry, there are no images matching your search query. Please, try again!');\n            hideElem(refs.loader);\n            return;\n        }\n        const markup = galleryTemplate(data.hits);\n        refs.galleryElem.innerHTML = markup;\n        maxPage = Math.ceil(data.totalHits/15);\n    } catch (err) { showMessage(err) }\n\n    lightBox.refresh();\n    hideElem(refs.loader);\n    showElem(refs.loadBtn);\n    updateBtnStatus();\n}\n\nrefs.loadBtn.addEventListener('click', onLoadBtnClick);\n\nasync function onLoadBtnClick() {\n    hideElem(refs.loadBtn);\n    showElem(refs.loader);\n    page += 1;\n\n    try {\n        const data = await getImages(userValue, page);\n        const markup = galleryTemplate(data.hits);\n        refs.galleryElem.insertAdjacentHTML('beforeend', markup);\n    } catch (err) { console.log(err) }\n\n    lightBox.refresh();\n    hideElem(refs.loader);\n    showElem(refs.loadBtn);\n\n    scroll();\n    updateBtnStatus();\n}\n\nfunction showMessage(message) {\n    iziToast.show({\n        message,\n        messageColor: '#050505',\n        backgroundColor: '#18DDFF',\n        maxWidth: '360px',\n        position: 'topRight',\n        theme: 'dark',\n    })\n}\n\nfunction scroll() {\n    const liElem = document.querySelector('li');\n    const height = liElem.getBoundingClientRect().height;\n    window.scrollBy({\n        top: height*3,\n        behavior: \"smooth\",\n    });\n}\n\nfunction updateBtnStatus() {\n    if (page >= maxPage) {\n    hideElem(refs.loadBtn);\n    hideElem(refs.loader);\n    showMessage(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n"],"names":["getImages","request","currentPage","axios","photoTemplate","image","galleryTemplate","array","photo","showElem","elem","hideElem","lightBox","SimpleLightbox","refs","page","userValue","maxPage","onFormElemSubmit","event","data","showMessage","markup","err","updateBtnStatus","onLoadBtnClick","scroll","message","iziToast","height"],"mappings":"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"}